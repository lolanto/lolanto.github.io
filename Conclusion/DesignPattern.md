# Update, Component以及Queue设计模式

## Update模式

在windows上编写游戏和编写一般应用程序一样，接收系统事件并处理。所以关键是一个while处理消息。

可以简单这样理解，每执行一次while循环，相当于执行了一帧。游戏中的一些对象，比如人物，敌人，它们的一些行为是不可能在一帧中完成的，比如行走一段距离。此时每一帧都需要计算人物在一帧中的移动距离，并设置相关参数以及渲染，这样对象才有“动起来”的感觉。

而每一帧的移动计算都需要被while循环直接或者间接地调用到。为了能够简化while循环中的代码，提高维护性，建议将每一帧的计算过程，以及每一帧之间的状态量封装与一个类中，并提供统一的Update接口供while直接或间接调用。

## Queue模式

这里说的队列模式是一个非常非常笼统的概念。“事件”或者“消息”对象由发布者产生，并放入到一个缓冲区(队列)当中，处理者从缓冲区中读取”靠上“的一个”事件“或者”消息“进行处理。

队列模式将发布者以及接收者解耦。在使用队列模式时，需要考虑以下问题：

* 该模式服务的范围(发布者和接收者是谁，有多少个)
* 处理的是什么类型的对象(事件，消息..)
* 这些对象有什么特性(有延后性，包含什么数据内容)

## 组件模式

*”多用组合少用继承“*

庞大的继承关系会为以后的维护工作增加难度，尽量减少继承的使用。组件模式就是继承的替代方案。比如某个对象拥有功能A以及功能B；使用继承的话，很简单就能想到A，B作为接口，让该对象继承。

使用组合方式，我们可以实现功能A的对象以及B的对象，并作为当前对象的一个成员变量。在使用这些功能的时候，调用A，B对象的接口。

当组件足够抽象时候，甚至可以通过组合不同的组件构成拥有不同行为组合的对象。

使用该模式需要考虑以下问题：

* 组件之间通讯——中间对象存储通讯需要的数据/组件间直接访问/通过事件发送接收方式通讯